= paginate @comments

%ol.comments_list
  - @comments.each do |comment|
    %li
      .item
        .body
          .comment{ class: comment.state }
            .commentable
              = comment.commentable_type
              &rarr;
              = link_to comment.commentable_title, comment.commentable_url
            .title
              %label from:
              = comment.title.blank? ? t('the_comments.guest_name') : comment.title
            .contacts
              %label contacts:
              = comment.contacts
            .content
              = comment.content
            .controls
              = render partial: 'the_comments/manage_controls', locals: { comment: comment, form_flag: false }

        .form.comment{ style: 'display:none', class: comment.state }
          = form_for comment do |f|
            .commentable
              = comment.commentable_type
              &rarr;
              = link_to comment.commentable_title, comment.commentable_url
            .title
              %label from:
              = f.text_field :title
            .contacts
              %label contacts:
              = f.text_field :contacts
            .content
              = f.text_area  :raw_content
            .controls
              = render partial: 'the_comments/manage_controls', locals: { comment: comment, form_flag: true }

= paginate @comments